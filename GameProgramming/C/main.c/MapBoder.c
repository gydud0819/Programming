#include "MapBoder.h"
#include "Console.h"

// Stage 만들기
// printf로만 미로를 구성하기엔 어려움을 느껴 배열을 사용하여 미로를 표현했다.

	
#define 가로2 30
#define 세로2 30

int map[가로][세로] =
{
	{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
	{1,0,0,1,1,1,1,0,0,1,0,0,1,2,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,1},
	{1,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
	{1,0,1,1,0,0,0,0,1,1,1,1,1,1,1,1,0,0,1,0,0,0,0,0,0,0,0,0,0,1},
	{1,0,0,1,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
	{1,0,0,0,0,0,1,1,1,1,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1},
	{1,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,1},
	{1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
	{1,0,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1},
	{1,0,0,1,1,1,0,0,0,0,0,0,2,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
	{1,1,0,0,0,1,1,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
	{1,0,0,1,1,1,0,0,1,1,1,0,0,1,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0,1},
	{1,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
	{1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,1},
	{1,0,1,2,0,1,0,0,1,1,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
	{1,0,1,1,0,1,1,0,1,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1},
	{1,0,0,0,0,1,0,0,1,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1},
	{1,0,0,1,1,1,0,0,0,0,0,0,0,1,0,2,1,1,0,0,0,0,0,0,0,0,0,0,0,1},
	{1,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1}, //   
	{1,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1}, //   
	{1,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1}, //   
	{1,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1}, //   
	{1,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1}, //   
	{1,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1}, //   
	{1,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1}, //   
	{1,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1}, //   
	{1,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1}, //   
	{1,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1}, //   
	{1,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1}, //   
	{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
};

void ShowStage1()		// 맵 내부가 보이는 함수 
{
	for (int y = 0; y < 세로; y++)
	{
		for (int x = 0; x < 가로; x++)
		{
			switch (map[y][x]) //맵 좌표 순서 y먼저인 것 기억하기
			{
			case 1:
				if (x == 0 || x == 19 || y == 0 || y == 19)
				{
					SetCurPosition(x, y);
					SetColor(0, 15);	// 미로 외벽 색 구분하기
					printf("■");
					SetColor(0, 15);	// 위와 같으며 아이템을 다 먹으면 색이 변경되는 걸 방지하기 위해 한번 더 사용했다.
				}
				else
				{
					SetCurPosition(x, y);
					SetColor(0, 15);		// 미로 내부 색을 콘솔 창과 동일하게 하여 투명한 것 처럼 설정했다.
					printf("■");
					SetColor(0, 15);		// 위와 같으며 아이템을 다 먹으면 색이 변경되는 걸 방지하기 위해 한번 더 사용했다.
				}
				break;

			case 0:
				SetCurPosition(x, y);
				printf(" ");
				break;

			case 2:
				SetCurPosition(x, y);
				SetColor(0, 4);
				printf("♥");
				SetColor(0, 15);
				break;

			case 3:
				SetCurPosition(x, y);
				printf("★");
				break;

			default:
				break;
			}

		}
	}
}

void ShowClearStage1()		// 미로 내부가 보이지 않는 맵
{
	for (int y = 0; y < 세로; y++)
	{
		for (int x = 0; x < 가로; x++)
		{
			switch (map[y][x]) //맵 좌표 순서 y먼저인 것 기억하기
			{
			case 1:
				if (x == 0 || x == 19 || y == 0 || y == 19)
				{
					SetCurPosition(x, y);
					SetColor(0, 15);	// 미로 외벽 색 구분하기
					printf("#");
					SetColor(0, 15);	// 위와 같으며 아이템을 다 먹으면 색이 변경되는 걸 방지하기 위해 한번 더 사용했다.
				}
				else
				{
					SetCurPosition(x, y);
					SetColor(0, 0);		// 미로 내부 색을 콘솔 창과 동일하게 하여 투명한 것 처럼 설정했다.
					printf("#");
					SetColor(0, 0);		// 위와 같으며 아이템을 다 먹으면 색이 변경되는 걸 방지하기 위해 한번 더 사용했다.
				}
				break;

			case 0:
				SetCurPosition(x, y);
				printf(" ");
				break;

			case 2:
				SetCurPosition(x, y);
				SetColor(0, 4);
				printf("♥");
				SetColor(0, 15);
				break;

			case 3:
				SetCurPosition(x, y);
				printf("★");
				break;

			default:
				break;
			}

		}
	}
}

// 출구를 나타내기 위한 맵
int map2[가로][세로] =
{
	{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
	{1,0,0,1,1,1,1,0,0,1,0,0,1,2,0,1,0,1,0,1},
	{1,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,1},
	{1,0,1,1,0,0,0,0,1,1,1,1,1,1,1,1,0,0,1,1},
	{1,0,0,1,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,1},
	{1,0,0,0,0,0,1,1,1,1,0,0,0,1,1,1,1,0,0,1},
	{1,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,0,1},
	{1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
	{1,0,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1},
	{1,0,0,1,1,1,0,0,0,0,0,0,2,1,0,0,0,0,0,1},
	{1,1,0,0,0,1,1,1,1,0,0,0,0,1,0,0,0,0,0,1},
	{1,0,0,1,1,1,0,0,1,1,1,0,0,1,1,1,0,1,1,1},
	{1,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,1},
	{1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1},
	{1,0,1,2,0,1,0,0,1,1,0,1,1,1,1,1,0,0,0,1},
	{1,0,1,1,0,1,1,0,1,0,0,1,0,0,0,0,0,0,1,1},
	{1,0,0,0,0,1,0,0,1,0,1,1,1,1,1,1,1,0,0,1},
	{1,0,0,1,1,1,0,0,0,0,0,0,0,1,0,2,1,1,0,1},
	{1,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0}, // ← (출구 위치) 19, 18
	{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
};

// 출구를 나타내기 위한 맵 함수 (추후 수정 예정)
void ShowMap2()
{
	for (int y = 0; y < 세로; y++)
	{
		for (int x = 0; x < 가로; x++)
		{
			switch (map[y][x]) //맵 좌표 순서 y먼저인 것 기억하기
			{
			case 1:
				if (x == 0 || x == 19 || y == 0 || y == 19)
				{
					SetCurPosition(x, y);
					SetColor(0, 15);	// 미로 외벽 색 구분하기
					printf("#");
					SetColor(0, 15);	// 위와 같으며 아이템을 다 먹으면 색이 변경되는 걸 방지하기 위해 한번 더 사용했다.
				}
				else
				{
					SetCurPosition(x, y);
					SetColor(0, 0);		// 미로 내부 색을 콘솔 창과 동일하게 하여 투명한 것 처럼 설정했다.
					printf(" ");
					SetColor(0, 0);		// 위와 같으며 아이템을 다 먹으면 색이 변경되는 걸 방지하기 위해 한번 더 사용했다.
				}
				break;

			case 0:
				SetCurPosition(x, y);
				printf(" ");
				break;

			case 2:
				SetCurPosition(x, y);
				SetColor(0, 4);
				printf("♥");
				SetColor(0, 15);
				break;

			case 3:
				SetCurPosition(x, y);
				printf("★");
				break;

			default:
				break;
			}

		}
	}
}


char Stage2[세로2][가로2 + 1] =
{
	//{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}, // 1 int로 해도되나? 똑같나? 
	//{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1}, // 1
	//{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1}, // 1
	//{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1}, // 1
	//{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1}, // 1
	//{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1}, // 1
	//{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1}, // 1
	//{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1}, // 1
	//{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1}, // 1
	//{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1}, // 1
	//{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1}, // 1
	//{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1}, // 1
	//{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1}, // 1
	//{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1}, // 1
	//{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1}, // 1
	//{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1}, // 1
	//{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1}, // 1
	//{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1}, // 1
	//{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1}, // 1
	//{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}, // 1 
	"################################################################################", // 20
	"#                   #                            ★#                   #       #",
	"#      ###################      ##########        #########            #       #",
	"#               #      #        #     #           #   #        #########    ####",
	"#               #   #  #    #####     #           #   #                ####    #",
	"#   #############   #           #     #           #        #############       #",
	"#               ###################   #      ######                    #       #",
	"#               #        #            #                                        #",
	"#                        #                               ############          #",
	"#                        #                                       #       #######",
	"#     #############      #############################           #             #",
	"#     #★        #                                               ###############",
	"#     #        #                                                        #      #",
	"#     #        ##########                                               #    ★#",
	"#     #               #                   ########################      #      #",
	"#     #########    ####                                                 #      #",
	"#                                                                 #######  #####",
	"#            #######   ###################                                     #",
	"#  ########  #               #★                                               #",
	"#       #    #               #                           ################      #",
	"#       #    #   #########   #                           #                     #",
	"#            #          #    #             ##############                      #",
	"#            #     #    ######                           #                     #",
	"#       #    #     #         #                   #########################     #",
	"#       #    #     #         #                   #★           #               #",
	"#       #    ##########      #                   #             #               #",
	"#       #    #        #                          #             #               #",
	"#       #    #                                   #                             #",
	"################################################################################", // 30
	
};

void ShowStage2()
{
	for (int i = 0; i < 가로2; i++)
	{
		printf("%s\n", Stage2[i]);
		
	}
}


void InitStage2(Player* playerptr)
{
	// 맵 데이터 초기화 (가장 중요한 부분)
	for (int y = 0; y < 20; y++) 
	{
		for (int x = 0; x < 20; x++) 
		{
			map[y][x] = 0;  // 기존 맵 데이터 완전히 삭제
		}
	}
	//ShowClearStage1();  // 스테이지1 내부 맵 숨기기

	system("cls");

	playerptr->playerPos.posX = 10;
	playerptr->playerPos.posY = 10;
	playerptr->itemCount = 0;
	playerptr->CurrentStage = 2;
	ShowStage2();
}
